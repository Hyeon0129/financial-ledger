/* ========== App Layout ========== */
.app-root {
  height: 100vh;
  width: 100vw;
  overflow: hidden;
}

.app-shell {
  display: flex;
  height: 100%;
}

/* ========== Sidebar ========== */
.sidebar {
  width: var(--sidebar-w);
  padding: 20px 0 20px 20px; /* Right padding removed for gap */
  display: flex;
  flex-direction: column;
  transition: width var(--transition-base);
  flex-shrink: 0;
  z-index: 100;
}

.sidebar.collapsed {
  width: var(--sidebar-w-collapsed);
}

.sidebar-panel {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.sidebar-panel .glass-content {
  padding: 20px;
  overflow: hidden; /* Hide overflow content during transition */
}

/* Sidebar Header */
.sidebar-header {
  display: flex;
  align-items: center;
  gap: 16px;
  padding-bottom: 24px;
  margin-bottom: 24px;
  border-bottom: 1px solid rgba(255,255,255,0.08);
  min-height: 80px;
  position: relative;
}
.sidebar.collapsed .sidebar-header {
  justify-content: center;
  padding-left: 0;
}

.user-avatar {
  width: 48px;
  height: 48px;
  min-width: 48px;
  border-radius: 50%;
  background-color: #333;
  background-size: cover;
  background-position: center;
  border: 2px solid rgba(255,255,255,0.15);
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

.user-info {
  display: flex;
  flex-direction: column;
  opacity: 1;
  transition: opacity 0.2s ease;
  white-space: nowrap;
}
.sidebar.collapsed .user-info {
  display: none;
  opacity: 0;
}

.user-info h3 {
  margin: 0;
  font-size: 16px;
  font-weight: 700;
  color: var(--text-main);
}
.user-info span {
  font-size: 13px;
  color: var(--text-muted);
}

/* Sidebar Toggle */
.sidebar-toggle-btn {
  margin-left: auto;
  width: 32px;
  height: 32px;
  border-radius: 10px;
  background: rgba(255,255,255,0.05);
  color: var(--text-muted);
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
}
.sidebar-toggle-btn:hover {
  background: rgba(255,255,255,0.15);
  color: white;
}
.sidebar.collapsed .sidebar-toggle-btn {
  display: none; /* Hide toggle inside header when collapsed? Or float it? */
}
/* We will handle expand click via the whole sidebar or a separate button if needed, 
   but user asked for "closed state -> only profile & icons". 
   Let's make the header clickable or add a small button. */

/* Sidebar Search */
.sidebar-search {
  position: relative;
  margin-bottom: 24px;
}
.sidebar.collapsed .sidebar-search {
  display: none;
}

.sidebar-search input {
  width: 100%;
  background: rgba(0,0,0,0.2);
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 14px;
  padding: 12px 12px 12px 42px;
  color: var(--text-main);
  font-size: 14px;
  outline: none;
}
.sidebar-search-icon {
  position: absolute;
  left: 14px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--text-muted);
  width: 18px;
  height: 18px;
}

/* Navigation */
.nav-menu {
  display: flex;
  flex-direction: column;
  gap: 8px;
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
}

.nav-item {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 14px 16px;
  border-radius: 16px;
  color: var(--text-muted);
  font-size: 15px;
  font-weight: 500;
  cursor: pointer;
  border: 1px solid transparent;
  background: transparent;
  width: 100%;
  text-align: left;
  white-space: nowrap;
  transition: all 0.2s ease;
}

.nav-item:hover {
  background: rgba(255,255,255,0.05);
  color: var(--text-main);
}

.nav-item.active {
  background: rgba(255,255,255,0.1);
  color: white;
  font-weight: 600;
  border-color: rgba(255,255,255,0.05);
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}
[data-theme="light"] .nav-item.active {
  background: white;
  color: var(--accent-blue);
}

.nav-item svg {
  width: 22px;
  height: 22px;
  min-width: 22px;
}

.nav-badge {
  margin-left: auto;
  background: var(--accent-orange);
  color: white;
  font-size: 11px;
  padding: 2px 8px;
  border-radius: 10px;
  font-weight: 700;
}

.sidebar.collapsed .nav-item {
  justify-content: center;
  padding: 16px;
}
.sidebar.collapsed .nav-item span,
.sidebar.collapsed .nav-item .nav-badge {
  display: none;
}

/* Upgrade Card */
.upgrade-card {
  background: linear-gradient(145deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
  border-radius: 20px;
  padding: 20px;
  text-align: center;
  border: 1px solid rgba(255,255,255,0.08);
  margin-top: 20px;
}
.sidebar.collapsed .upgrade-card { display: none; }

.upgrade-card h4 {
  margin: 0 0 8px 0;
  font-size: 15px;
  font-weight: 700;
  color: white;
}
.upgrade-card p {
  margin: 0 0 16px 0;
  font-size: 13px;
  color: var(--text-muted);
  line-height: 1.5;
}
.upgrade-btn {
  width: 100%;
  padding: 12px;
  border-radius: 12px;
  border: none;
  background: white;
  color: black;
  cursor: pointer;
  font-size: 13px;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  transition: transform 0.2s;
}
.upgrade-btn:hover { transform: translateY(-2px); }
[data-theme="light"] .upgrade-btn { background: black; color: white; }


/* ========== Main Content ========== */
/* Ensure scrollbar is at the edge and header is sticky */
.app-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  padding: 0 32px 32px 32px; /* Remove top padding to let header stick to edge */
  overflow-y: auto; /* Scrollbar here */
  height: 100vh;
  position: relative;
}

/* Header */
.top-header {
  position: sticky;
  top: 0;
  z-index: 50;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 24px 0;
  margin-bottom: 12px;
  /* Glass effect for header background so it's readable over scroll content */
  /* User asked for NO BACKGROUND, but sticky needs something or content overlaps messily.
     User said "헤더는 배경을 없에줘", "스크롤바도 위로 올라갈수있어야돼".
     If we make it transparent and sticky, text overlaps.
     If we make it static, it scrolls away. 
     If we make it fixed, it needs width calc.
     
     Interpreting "스크롤바도 위로 올라갈수있어야돼": The scrollbar track should span the full viewport height.
     This is achieved by putting overflow on .app-content (which we did).
     "헤더는 배경을 없에줘": background: transparent.
  */
  background: transparent; 
  /* To prevent total mess, we might need a subtle gradient mask or just let it be. */
}

.header-left {
  display: flex;
  flex-direction: column;
}
.header-left h1 {
  margin: 0 0 4px 0;
  font-size: 26px;
  font-weight: 700;
  color: var(--text-main);
}
.breadcrumbs {
  font-size: 13px;
  color: var(--text-muted);
  display: flex;
  align-items: center;
  gap: 8px;
}

/* Month Nav - Centered Absolute */
.month-nav-container {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  top: 24px;
}
.month-nav {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 8px 24px;
  border-radius: 999px;
  background: var(--lg-bg-color); /* Glassy */
  border: 1px solid var(--lg-border);
  box-shadow: var(--lg-shadow);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}
.month-label {
  font-size: 15px;
  font-weight: 700;
  min-width: 120px;
  text-align: center;
  color: var(--text-main);
}
.month-btn {
  background: transparent;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  padding: 6px;
  border-radius: 50%;
  display: flex;
}
.month-btn:hover { background: rgba(255,255,255,0.1); color: white; }

/* Header Right */
.header-right {
  display: flex;
  align-items: center;
  gap: 16px;
}

.icon-btn {
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 16px;
  background: rgba(255,255,255,0.03);
  border: 1px solid rgba(255,255,255,0.08);
  color: var(--text-main);
  cursor: pointer;
  transition: all 0.2s;
  position: relative;
}
.icon-btn:hover {
  background: rgba(255,255,255,0.1);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.notif-dot {
  width: 10px;
  height: 10px;
  background: var(--accent-red);
  border-radius: 50%;
  position: absolute;
  top: 10px;
  right: 10px;
  border: 2px solid #000;
}

/* Scroll wrapper removal -> direct scroll on app-content */
.main-scroll {
  display: contents; /* Remove layout impact */
}

@media (max-width: 1100px) {
  .month-nav-container { position: static; transform: none; margin-bottom: 16px; }
  .top-header { flex-direction: column; align-items: flex-start; height: auto; gap: 16px; position: static; }
  .header-right { width: 100%; justify-content: flex-end; }
}